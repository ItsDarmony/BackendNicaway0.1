const actividades = {
  // ENERO
  "2025-01-17": {
    titulo: "Fiesta de San Sebastián",
    descripcion: "Tradicional fiesta patronal en Diriamba con bailes folclóricos.",
    lugar: "Diriamba, Carazo",
    hora: "10:00 AM",
    imagen: "../Imagenes/san_sebastian.jpg"
  },
  "2025-01-25": {
    titulo: "Festival del Maíz",
    descripcion: "Evento gastronómico con platillos típicos elaborados a base de maíz.",
    lugar: "Matagalpa",
    hora: "12:00 PM",
    imagen: "../Imagenes/festival_maiz.jpg"
  },

  // FEBRERO
  "2025-02-14": {
    titulo: "Carnaval de las Flores",
    descripcion: "Desfile colorido con carrozas, música y danzas tradicionales.",
    lugar: "Jinotepe, Carazo",
    hora: "4:00 PM",
    imagen: "../Imagenes/carnaval_flores.jpg"
  },
  "2025-02-21": {
    titulo: "Festival del Café",
    descripcion: "Celebración de la cosecha de café con degustaciones y música.",
    lugar: "Jinotega",
    hora: "10:00 AM",
    imagen: "../Imagenes/festival_cafe.jpg"
  },

  // MARZO
  "2025-03-19": {
    titulo: "Fiesta de San José",
    descripcion: "Celebración religiosa y cultural en varias ciudades.",
    lugar: "Masaya, Nicaragua",
    hora: "5:00 PM",
    imagen: "../Imagenes/san_jose.jpg"
  },
  "2025-03-22": {
    titulo: "Festival del Folklore",
    descripcion: "Encuentro de danzas y tradiciones de todo el país.",
    lugar: "Masatepe",
    hora: "2:00 PM",
    imagen: "../Imagenes/folklore.jpg"
  },

  // ABRIL
  "2025-04-09": {
    titulo: "Semana Santa",
    descripcion: "Procesiones solemnes, alfombras pasionarias y tradición religiosa.",
    lugar: "Granada y León",
    hora: "Todo el día",
    imagen: "../Imagenes/semana_santa.jpg"
  },
  "2025-04-23": {
    titulo: "Feria del Quesillo",
    descripcion: "Evento gastronómico en honor al platillo típico nicaragüense.",
    lugar: "La Paz Centro",
    hora: "12:00 PM",
    imagen: "../Imagenes/quesillo.jpg"
  },

  // MAYO
  "2025-05-30": {
    titulo: "Día de la Madre",
    descripcion: "Celebración nacional con conciertos, actividades y ferias.",
    lugar: "Nacional",
    hora: "6:00 PM",
    imagen: "../Imagenes/dia_madre.jpg"
  },
  "2025-05-12": {
    titulo: "Feria de las Artesanías",
    descripcion: "Exposición de productos artesanales y cultura.",
    lugar: "San Juan de Oriente",
    hora: "9:00 AM",
    imagen: "../Imagenes/artesanias.jpg"
  },

  // JUNIO
  "2025-06-24": {
    titulo: "Fiesta de San Juan Bautista",
    descripcion: "Tradicional celebración con música, bailes y ferias.",
    lugar: "Masaya",
    hora: "3:00 PM",
    imagen: "../Imagenes/san_juan.jpg"
  },
  "2025-06-29": {
    titulo: "Fiesta de San Pedro",
    descripcion: "Fiestas religiosas con procesiones y actividades culturales.",
    lugar: "Chinandega",
    hora: "11:00 AM",
    imagen: "../Imagenes/san_pedro.jpg"
  },

  // JULIO
  "2025-07-25": {
    titulo: "Fiestas de Santiago Apóstol",
    descripcion: "Celebración patronal con bailes, música y actividades culturales.",
    lugar: "Boaco",
    hora: "Todo el día",
    imagen: "../Imagenes/santiago_apostol.jpg"
  },
  "2025-07-30": {
    titulo: "Festival del Cacao",
    descripcion: "Evento gastronómico dedicado al cacao y chocolate.",
    lugar: "Waslala",
    hora: "9:00 AM",
    imagen: "../Imagenes/cacao.jpeg"
  },

  // AGOSTO
  "2025-08-01": {
    titulo: "Fiestas Patronales de Santo Domingo",
    descripcion: "La fiesta más grande de Managua con procesiones y música popular.",
    lugar: "Managua",
    hora: "Todo el día",
    imagen: "../Imagenes/santo_domingo.jpg"
  },
  "2025-08-10": {
    titulo: "Festival del Güegüense",
    descripcion: "Teatro y danzas tradicionales reconocidas como patrimonio.",
    lugar: "Diriamba",
    hora: "10:00 AM",
    imagen: "../Imagenes/gueguense.jpg"
  },

  // SEPTIEMBRE
  "2025-09-14": {
    titulo: "Desfile Escolar",
    descripcion: "Desfile nacional con bandas rítmicas y presentaciones cívicas.",
    lugar: "Managua",
    hora: "8:00 AM",
    imagen: "../Imagenes/desfile.jpg"
  },
  "2025-09-15": {
    titulo: "Fiestas Patrias",
    descripcion: "Desfiles escolares, bandas rítmicas y actos cívicos.",
    lugar: "Nacional",
    hora: "8:00 AM",
    imagen: "../Imagenes/fiestas_patrias.jpeg"
  },

  // OCTUBRE
  "2025-10-15": {
    titulo: "Fiestas Patronales de León",
    descripcion: "Desfiles, danzas folclóricas y gastronomía típica.",
    lugar: "León, Nicaragua",
    hora: "10:00 AM",
    imagen: "../Imagenes/fiestas_leon.jpg"
  },
  "2025-10-30": {
    titulo: "Festival de  Masaya",
    descripcion: "Evento cultural y artístico en Masaya con música y bailes.",
    lugar: "Masaya",
    hora: "6:00 PM",
    imagen: "../Imagenes/festival_masaya.jpg"
  },

  // NOVIEMBRE
  "2025-11-02": {
    titulo: "Día de los Difuntos",
    descripcion: "Visitas a cementerios y actividades culturales tradicionales.",
    lugar: "Nacional",
    hora: "Todo el día",
    imagen: "../Imagenes/difuntos.jpg"
  },
  "2025-11-24": {
    titulo: "Fiesta de San Felipe",
    descripcion: "Fiestas patronales de Chinandega con ferias y procesiones.",
    lugar: "Chinandega",
    hora: "Todo el día",
    imagen: "../Imagenes/san_felipe.jpg"
  },

  // DICIEMBRE
  "2025-12-07": {
    titulo: "La Gritería",
    descripcion: "Fiesta mariana más popular en honor a la Purísima Concepción.",
    lugar: "Nacional",
    hora: "6:00 PM",
    imagen: "../Imagenes/griteria.jpg"
  },
  "2025-12-24": {
    titulo: "Navidad",
    descripcion: "Celebración de la Navidad con cena y actividades familiares.",
    lugar: "Nacional",
    hora: "7:00 PM",
    imagen: "../Imagenes/navidad.jpg"
  }
};

// ==================== FUNCIONES ====================

let mesActual = new Date().getMonth();
let añoActual = new Date().getFullYear();

function generarCalendario(mes, año) {
  const calendarDiv = document.getElementById("calendar");
  calendarDiv.innerHTML = "";

  const contenedorMes = document.createElement("div");
  contenedorMes.classList.add("mes-container");

  const nombreMes = new Date(año, mes).toLocaleString("es-ES", { month: "long" });

  const header = document.createElement("div");
  header.classList.add("header-mes");

  const btnPrev = document.createElement("button");
  btnPrev.textContent = "◀";
  btnPrev.onclick = () => cambiarMes(-1);

  const titulo = document.createElement("h3");
  titulo.textContent = `${nombreMes.charAt(0).toUpperCase() + nombreMes.slice(1)} ${año}`;

  const btnNext = document.createElement("button");
  btnNext.textContent = "▶";
  btnNext.onclick = () => cambiarMes(1);

  header.appendChild(btnPrev);
  header.appendChild(titulo);
  header.appendChild(btnNext);
  contenedorMes.appendChild(header);

  const tabla = document.createElement("table");
  tabla.classList.add("tabla-calendario");

  const diasSemana = ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"];
  let fila = document.createElement("tr");
  diasSemana.forEach(dia => {
    const th = document.createElement("th");
    th.textContent = dia;
    fila.appendChild(th);
  });
  tabla.appendChild(fila);

  const primerDia = new Date(año, mes, 1).getDay();
  const ultimoDia = new Date(año, mes + 1, 0).getDate();

  fila = document.createElement("tr");
  for (let i = 0; i < primerDia; i++) {
    fila.appendChild(document.createElement("td"));
  }

  for (let dia = 1; dia <= ultimoDia; dia++) {
    if (fila.children.length === 7) {
      tabla.appendChild(fila);
      fila = document.createElement("tr");
    }

    const celda = document.createElement("td");
    celda.textContent = dia;

    const fechaClave = `${año}-${String(mes + 1).padStart(2, "0")}-${String(dia).padStart(2, "0")}`;

    if (actividades[fechaClave]) {
      celda.classList.add("evento");
    }

    celda.addEventListener("click", () => {
      document.querySelectorAll(".tabla-calendario td").forEach(td => td.classList.remove("seleccionado"));
      celda.classList.add("seleccionado");
      mostrarActividad(fechaClave);
    });

    fila.appendChild(celda);
  }

  while (fila.children.length < 7) {
    fila.appendChild(document.createElement("td"));
  }
  tabla.appendChild(fila);

  contenedorMes.appendChild(tabla);
  calendarDiv.appendChild(contenedorMes);
}

function mostrarActividad(fecha) {
  const infoDiv = document.getElementById("info");

  const evento = actividades[fecha];

  if (evento) {
    infoDiv.innerHTML = `
      <h3>${evento.titulo}</h3>
      <img src="${evento.imagen}" alt="${evento.titulo}" style="width:100%; max-height:200px; object-fit:cover; border-radius:8px; margin:10px 0;">
      <p><b>Descripción:</b> ${evento.descripcion}</p>
      <p><b>Lugar:</b> ${evento.lugar}</p>
      <p><b>Hora:</b> ${evento.hora}</p>
    `;
  } else {
    infoDiv.innerHTML = `<p>No hay actividades para esta fecha.</p>`;
  }
}

function cambiarMes(direccion) {
  mesActual += direccion;
  if (mesActual < 0) {
    mesActual = 11;
    añoActual--;
  } else if (mesActual > 11) {
    mesActual = 0;
    añoActual++;
  }
  generarCalendario(mesActual, añoActual);
}

document.addEventListener("DOMContentLoaded", () => {
  generarCalendario(mesActual, añoActual);
});
